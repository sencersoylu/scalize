!function(t){"use strict";var s={width:0,height:0,selector:".item-point",styleSelector:"circle",animationSelector:"",animationPopoverIn:"",animationPopoverOut:"",onInit:null,getSelectorElement:null,getValueRemove:null},e={settings:null,init:function(i,n){this.settings=t.extend(s,n),this.event(i),e.layout(i),t(window).on("load",function(){e.layout(i)}),t(i).find(".target").on("load",function(){e.layout(i)}),t(window).on("resize",function(){e.layout(i)})},event:function(s){this.settings.styleSelector&&t(this.settings.selector).addClass(this.settings.styleSelector),this.settings.animationSelector&&("marker"==this.settings.animationSelector?(t(this.settings.selector).addClass(this.settings.animationSelector),t(this.settings.selector).append('<div class="pin"></div>'),t(this.settings.selector).append('<div class="pulse"></div>')):t(this.settings.selector).addClass(this.settings.animationSelector)),t.isFunction(this.settings.onInit)&&this.settings.onInit(),t(s).find(".content").addClass("animated"),t(this.settings.selector).wrapAll("<div class='wrap-selector' />"),t(this.settings.selector).each(function(){t(".toggle",this).on("click",function(i){i.preventDefault(),t(this).closest(e.settings.selector).toggleClass("active");var n=t(this).closest(e.settings.selector).data("popover"),o=t(n);t(this).closest(e.settings.selector).hasClass("active")&&!t(this).closest(e.settings.selector).hasClass("disabled")?(t.isFunction(e.settings.getSelectorElement)&&e.settings.getSelectorElement(t(this).closest(e.settings.selector)),o.fadeIn(),e.layout(s),o.removeClass(e.settings.animationPopoverOut),o.addClass(e.settings.animationPopoverIn)):(t.isFunction(e.settings.getValueRemove)&&e.settings.getValueRemove(t(this).closest(e.settings.selector)),o.removeClass(e.settings.animationPopoverIn),o.addClass(e.settings.animationPopoverOut),o.delay(500).fadeOut())});var i=t(this).data("popover"),n=t(i);n.find(".exit").on("click",function(s){s.preventDefault(),t('[data-popover="'+i+'"]').removeClass("active"),n.removeClass(e.settings.animationPopoverIn),n.addClass(e.settings.animationPopoverOut),n.delay(500).fadeOut()})})},layout:function(s){var e=new Image;e.src=s.find(".target").attr("src");var i=e.naturalWidth,n=e.naturalHeight,o=t(s).width(),a=n*(o/i*100)/100,l=o/i,c=t(s).height()/n;t(s).css("height",a),t(s).stop().css("width","100%"),t(this.settings.selector).each(function(){var s=t(this).data("top")*c,e=t(this).data("left")*l;t(this).css("top",s+"px"),t(this).css("left",e+"px");var i=t(this).data("popover"),n=t(i).find(".head").outerHeight()+t(i).find(".body").outerHeight()+t(i).find(".footer").outerHeight();if(t(i).css("left",e+"px"),t(i).css("height",n+"px"),t(i).hasClass("bottom")){a=s-(o=t(i).outerHeight());t(i).css("top",a+"px")}else if(t(i).hasClass("center")){var o=.5*t(i).outerHeight(),a=s-o;t(i).css("top",a+"px")}else t(i).css("top",s+"px");if(t(".toggle",this).css("width",t(this).outerWidth()),t(".toggle",this).css("height",t(this).outerHeight()),t(this).find(".pin")){var r=t(".pin",this).outerWidth(),h=t(".pin",this).outerHeight();t(".toggle",this).css("width",r),t(".toggle",this).css("height",h)}var g=t(this).data("color");console.log(g),t(this).css("background-color",g)})}};t.fn.scalize=function(t){return e.init(this,t)}}(jQuery);
